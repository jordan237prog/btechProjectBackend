(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-099e9280"],{"0407":function(e,t,a){"use strict";var o=a("6886"),i=a.n(o);i.a},"0f29":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-container",[o("v-form",{model:{value:e.isValid,callback:function(t){e.isValid=t},expression:"isValid"}},[o("v-row",[o("v-col",[o("h3",[e._v("Project Quota(Devis)")]),o("img",{staticClass:"img",attrs:{height:"30",src:a("dae4")}})])],1),o("v-row",[o("v-col",{staticClass:" col- .col-md-4"},[o("v-text-field",{staticClass:"error-combobox",attrs:{outlined:"",type:"text",rules:e.verifyQuoteName,name:"quoteName",label:"Quote Name","append-icon":"mdi-card-plus",required:""},model:{value:e.quote.quoteName,callback:function(t){e.$set(e.quote,"quoteName",t)},expression:"quote.quoteName"}})],1)],1),o("v-card",{staticClass:"errors",attrs:{flat:""}},[o("span",{staticStyle:{color:"#FB236A"}},[e._v(e._s(e.message))])]),o("v-row",{attrs:{id:"line_item",justify:"center"}},[o("v-col",{staticClass:" col-3 .col-md-4"},[o("h3",[e._v(" ITEM NAME ")])]),o("v-col",{staticClass:" col-2 .col-md-4"},[o("h3",[e._v(" QUANTITY ")])]),o("v-col",{staticClass:" col-2 .col-md-4"},[o("h3")])],1),e.error?o("v-row",{staticClass:" col-10 .col-md-4",attrs:{justify:"center"}}):e._e(),e._l(e.quote_line_items,(function(t,a){return o("v-row",{key:a,attrs:{justify:"center"}},[o("v-col",{staticClass:" col-5 .col-md-4"},[o("v-autocomplete",{attrs:{chips:"",items:e.quoteItemsNames,"item-text":"quote_item_name",outlined:"",rules:e.verifyItemName,color:"white",height:"2",name:"quote_item_name",label:"Item Name",required:""},on:{change:e.GetItemPrice},model:{value:t.quote_item_name,callback:function(a){e.$set(t,"quote_item_name",a)},expression:"quote_line_item.quote_item_name"}})],1),o("v-col",{staticClass:" col-5 .col-md-4"},[o("v-text-field",{directives:[{name:"cloneya-input",rawName:"v-cloneya-input",value:"quantity",expression:"'quantity'"}],staticClass:"error-combobox",attrs:{outlined:"",type:"number",name:"quantity",rules:e.verifyQuantity,label:"Quantity","append-icon":"mdi-numeric-1-box-multiple",required:""},model:{value:t.quantity,callback:function(a){e.$set(t,"quantity",a)},expression:"quote_line_item.quantity"}})],1),o("v-col",{staticClass:" col-1 .col-md-4"},[o("v-avatar",{attrs:{color:"primary","x-large":""},on:{click:e.addLine}},[o("v-icon",{staticClass:"mdi-108px mdi-light"},[e._v("mdi-playlist-plus")])],1)],1),o("v-col",{staticClass:" col-1 .col-md-4"},[a+1===e.quote_line_items.length?o("v-avatar",{attrs:{color:"error","x-large":""},on:{click:function(t){return e.removeLine(a)}}},[o("v-icon",{attrs:{dark:""}},[e._v("mdi-delete-forever")])],1):e._e()],1)],1)})),o("v-row",[o("v-col",{staticClass:"col-8 .col-md-4"}),o("v-col",{staticClass:"col-4 .col-md-4"},[o("v-btn",{staticClass:"log-btn",attrs:{block:"","x-large":"",loading:e.loading,disabled:!e.isValid,color:"#10195D",name:"createQuote"},on:{click:e.createQuote}},[e._v(" create quote ")])],1)],1)],2)],1)},i=[],n=(a("4de4"),a("a434"),a("465d")),u=a("93f0"),s=a("ff70"),l={name:"createNewQuota",data:function(){return{isValid:!0,blockRemoval:!0,price:null,inputGroup:0,loading:!1,quoteName:null,quoteItems:null,quoteItemsNames:[],message:null,quote:new n["a"]("","",""),quote_line_items:[],verifyQuoteName:[function(e){return!!e||"quote Name is required"},function(e){return e&&e.length>=4||"quote Name must be greater than 3 characters"}],verifyQuoteElement:[function(e){return!!e||"Number of elements required"},function(e){return e&&e>0||"quote must have atleast one element"}],verifyItemName:[function(e){return!!e||"Please make a valid selection"}],verifyQuantity:[function(e){return!!e||"Please add a valid value"}]}},mounted:function(){this.addLine(),this.useUserId()},created:function(){this.fetchData()},watch:{$route:"fetchData",quote_line_items:function(){this.blockRemoval=this.quote_line_items.length<=1}},methods:{useUserId:function(){this.getUserID&&(this.quote.userId=this.$store.state.auth.user.id)},addLine:function(){var e=this.quote_line_items.filter((function(e){return null===e.quote_item_name}));e.length>=1&&this.quote_line_items.length>0?this.message="Please fill the last line before adding a new one !":this.quote_line_items.push({quote_item_name:null,quantity:null})},removeLine:function(e){this.blockRemoval||this.quote_line_items.splice(e,1)},fetchData:function(){var e=this;this.error=this.quoteItems=null,this.loading=!0,u["a"].getQuoteItems().then((function(t){e.loading=!1,e.quoteItems=t.data;for(var a=0;a<t.data.length;a++)e.quoteItemsNames.push(t.data[a].quote_item_name)})).catch((function(e){return{message:e||"An error ocurred while fetching the quote components please verify your internet conection and try again letter"}}))},GetItemPrice:function(e){for(var t=0;t<this.quoteItems.length;t++)this.quoteItems[t].quote_item_name===e&&(this.quote_line_items.price=this.quoteItems[t].quote_item_price)},validate:function(){this.$refs.form.validate()},createQuote:function(){var e=this;this.loading=!0,this.$validator.validateAll().then((function(t){t?(e.quote.quote_line_items=e.quote_line_items,console.log(e.quote),s["a"].createQuote(e.quote).then((function(t){return e.loading=!1,e.$router.push("allQuota"),t})).catch((function(e){return e||"Unable to save quote please check your connection and try again"}))):e.loading=!1}))}},computed:{currentUser:function(){return this.$store.state.auth.user},getUserID:function(){return this.$store.state.auth.user.id}}},r=l,c=(a("0407"),a("2877")),m=a("6544"),d=a.n(m),f=a("c6a6"),v=a("8212"),h=a("8336"),q=a("b0af"),_=a("62ad"),p=a("a523"),g=a("4bd4"),b=a("132d"),y=a("0fd9"),I=a("8654"),k=Object(c["a"])(r,o,i,!1,null,"23891f42",null);t["default"]=k.exports;d()(k,{VAutocomplete:f["a"],VAvatar:v["a"],VBtn:h["a"],VCard:q["a"],VCol:_["a"],VContainer:p["a"],VForm:g["a"],VIcon:b["a"],VRow:y["a"],VTextField:I["a"]})},"465d":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var o=a("d4ec"),i=function e(t,a,i){Object(o["a"])(this,e),this.quoteName=t,this.userId=a,this.quote_line_items=i}},6886:function(e,t,a){},"93f0":function(e,t,a){"use strict";var o=a("d4ec"),i=a("bee2"),n=a("bc3a"),u=a.n(n),s=a("fce9"),l=s["a"]+"quote_items/",r=function(){function e(){Object(o["a"])(this,e)}return Object(i["a"])(e,[{key:"getQuoteItems",value:function(){return u.a.get(l)}}]),e}();t["a"]=new r},ff70:function(e,t,a){"use strict";var o=a("d4ec"),i=a("bee2"),n=a("bc3a"),u=a.n(n),s=a("fce9"),l=s["a"]+"quotes",r=function(){function e(){Object(o["a"])(this,e)}return Object(i["a"])(e,[{key:"createQuote",value:function(e){return u.a.post(l,e)}},{key:"getAllQuotes",value:function(e){return u.a.get(l+"/"+e)}},{key:"deleteQuote",value:function(e,t){return u.a.delete(l+"/"+e+"/"+t)}},{key:"updateQuote",value:function(e,t,a){u.a.delete(l+"/"+e+"/"+t),u.a.post(l,a)}}]),e}();t["a"]=new r}}]);
//# sourceMappingURL=chunk-099e9280.6bfb81fe.js.map