(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7c6fe884"],{"38a6":function(t,e,l){},b99a:function(t,e,l){"use strict";var i=l("d4ec"),a=l("bee2"),s=l("bc3a"),n=l.n(s),o=l("fce9"),c=o["a"]+"bills",r=function(){function t(){Object(i["a"])(this,t)}return Object(a["a"])(t,[{key:"createBill",value:function(t){return n.a.post(c,t)}},{key:"getAllBills",value:function(t){return n.a.get(c+"/"+t)}},{key:"deleteBill",value:function(t,e){return n.a.delete(c+"/"+t+"/"+e)}},{key:"updateBill",value:function(t,e,l){n.a.delete(c+"/"+t+"/"+e),n.a.post(c,l)}}]),t}();e["a"]=new r},e375:function(t,e,l){"use strict";var i=l("38a6"),a=l.n(i);a.a},e6e7:function(t,e,l){"use strict";l.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-row",{attrs:{justify:"center"}},[i("v-col",{staticClass:" col-11 .col-md-4"},[i("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.items,search:t.search,"sort-by":"billName"},scopedSlots:t._u([{key:"top",fn:function(){return[i("v-toolbar",{attrs:{flat:"",color:"white"}},[i("v-toolbar-title",[t._v("LIST OF ALL BILLS")]),i("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),i("v-spacer"),i("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search",outlined:"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),i("v-spacer"),i("router-link",{attrs:{to:"newBill"}},[i("v-btn",{staticClass:"mb-2",attrs:{link:"",color:"primary",dark:""}},[t._v("New Bill ")])],1)],1)]},proxy:!0},{key:"item.actions",fn:function(e){var l=e.item;return[i("v-avatar",{attrs:{color:"primary",size:"30"},on:{click:function(e){t.editItem(l),t.editDialog=!0}}},[i("v-icon",{staticClass:"mdi-light",attrs:{small:""}},[t._v("mdi-pencil")])],1),i("v-avatar",{staticClass:"avatar",attrs:{color:"warning",size:"30"},on:{click:function(e){t.view(l),t.viewDialog=!0}}},[i("v-icon",{staticClass:"mdi-light",attrs:{small:""}},[t._v(" mdi-file-pdf-box ")])],1),i("v-avatar",{attrs:{color:"error",size:"30"},on:{click:function(e){return t.deleteItem(l)}}},[i("v-icon",{staticClass:"mdi-light",attrs:{small:""}},[t._v("mdi-delete")])],1)]}},{key:"no-data",fn:function(){},proxy:!0}],null,!0)})],1)],1),i("v-dialog",{attrs:{persistent:"","max-width":"900px"},model:{value:t.editDialog,callback:function(e){t.editDialog=e},expression:"editDialog"}},[i("v-card",[i("v-card-title",[i("span",{staticClass:"headline"},[t._v("Edit Bill")])]),i("v-card-text",[i("v-container",[i("v-form",{model:{value:t.isValid,callback:function(e){t.isValid=e},expression:"isValid"}},[i("v-row",[i("v-col",[i("h3",[t._v("Bill by")]),i("img",{staticClass:"img",attrs:{height:"30",src:l("dae4")}})])],1),i("v-row",[i("v-col",{staticClass:" col- .col-md-4"},[i("v-text-field",{staticClass:"error-combobox",attrs:{outlined:"",type:"text",rules:t.verifyBillName,name:"billName",label:"Bill Name","append-icon":"mdi-card-plus",required:"",small:""},model:{value:t.bill.billName,callback:function(e){t.$set(t.bill,"billName",e)},expression:"bill.billName"}})],1)],1),i("v-card",{staticClass:"errors",attrs:{flat:""}},[i("span",{staticStyle:{color:"#FB236A"}},[t._v(t._s(t.message))])]),i("v-row",{attrs:{id:"line_item",justify:"center"}},[i("v-col",{staticClass:" col-3 .col-md-4"},[i("h3",[t._v(" ITEM NAME ")])]),i("v-col",{staticClass:" col-2 .col-md-4"},[i("h3",[t._v(" QUANTITY ")])]),i("v-col",{staticClass:" col-2 .col-md-4"},[i("h3")])],1),t.message?i("v-row",{staticClass:" col-10 .col-md-4",attrs:{justify:"center"}}):t._e(),t._l(t.bill_line_items,(function(e,l){return i("v-row",{key:l,attrs:{justify:"center"}},[i("v-col",{staticClass:" col-5 .col-md-4"},[i("v-autocomplete",{attrs:{chips:"",items:t.billItemsNames,"item-text":"bill_item_name",outlined:"",rules:t.verifyItemName,color:"white",height:"2",name:"bill_item_name",label:"Item Name",required:""},model:{value:e.bill_item_name,callback:function(l){t.$set(e,"bill_item_name",l)},expression:"bill_line_item.bill_item_name"}})],1),i("v-col",{staticClass:" col-5 .col-md-4"},[i("v-text-field",{directives:[{name:"cloneya-input",rawName:"v-cloneya-input",value:"quantity",expression:"'quantity'"}],staticClass:"error-combobox",attrs:{outlined:"",type:"number",name:"quantity",rules:t.verifyQuantity,label:"Quantity","append-icon":"mdi-numeric-1-box-multiple",required:""},model:{value:e.quantity,callback:function(l){t.$set(e,"quantity",l)},expression:"bill_line_item.quantity"}})],1),i("v-col",{staticClass:" col-1 .col-md-4"},[i("v-avatar",{attrs:{color:"primary","x-large":""},on:{click:t.addLine}},[i("v-icon",{staticClass:"mdi-108px mdi-light"},[t._v("mdi-playlist-plus")])],1)],1),i("v-col",{staticClass:" col-1 .col-md-4"},[l+1===t.bill_line_items.length?i("v-avatar",{attrs:{color:"error","x-large":""},on:{click:function(e){return t.removeLine(l)}}},[i("v-icon",{attrs:{dark:""}},[t._v("mdi-delete-forever")])],1):t._e()],1)],1)})),i("v-row",[i("v-col",{staticClass:"col-6 .col-md-4"}),i("v-col",{staticClass:"col-3 .col-md-4"},[i("v-btn",{staticClass:"log-btn",attrs:{block:"","x-large":"",color:"error",name:"createBill"},on:{click:t.cancel}},[t._v(" cancel ")])],1),i("v-col",{staticClass:"col-3 .col-md-4"},[i("v-btn",{staticClass:"log-btn",attrs:{block:"","x-large":"",loading:t.loading,disabled:!t.isValid,color:"#10195D",dark:"",name:"createBill"},on:{click:t.updateBill}},[t._v(" update bill ")])],1)],1)],2)],1)],1)],1)],1),[i("v-row",[i("v-dialog",{attrs:{width:"800px",persistent:""},model:{value:t.viewDialog,callback:function(e){t.viewDialog=e},expression:"viewDialog"}},[i("v-card",[i("div",{attrs:{id:"pdfToBeGenerated"}},[i("v-card-title",[i("v-row",[t._v("Bill name : "),i("h3",[t._v(t._s(t.bill_Name))])])],1),t._v(" "),i("v-divider"),i("v-card-text",[i("v-row",[i("v-col",{staticClass:" col- .col-md-4"}),i("v-col",{staticClass:" col-2 .col-md-4"},[i("img",{staticClass:"img",attrs:{height:"30",src:l("dae4")}})])],1),[i("v-simple-table",{attrs:{height:"300px"},scopedSlots:t._u([{key:"default",fn:function(){return[i("thead",[i("tr",[i("th",{staticClass:"text-left"},[t._v("Designation")]),i("th",{staticClass:"text-left"},[t._v("Quantity")]),i("th",{staticClass:"text-left"},[t._v("Unit price(XAF)")]),i("th",{staticClass:"text-left"},[t._v("Total Price(XAF)")])])]),i("tbody",t._l(t.selectedToView,(function(e,l){return i("tr",{key:l},[i("td",[t._v(t._s(e.bill_item_name))]),i("td",[t._v(t._s(e.bill_line_item.quantity))]),i("td",[t._v(t._s(e.bill_item_price))]),i("td",[i("h3",[t._v(t._s(Number(e.bill_item_price)*Number(e.bill_line_item.quantity)))])])])})),0)]},proxy:!0}])})],i("v-divider"),i("v-row",[i("v-col",{staticClass:" col-1 .col-md-4"}),i("v-col",{staticClass:" col- .col-md-4"},[i("h2",[t._v("Total")])]),i("v-col",{staticClass:" col-3 .col-md-4"},[i("h2",[t._v(t._s(t.totalPrice))])])],1),i("v-divider")],2)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.viewDialog=!1}}},[t._v("share"),i("v-icon",{staticClass:"mdi-light",attrs:{small:""}},[t._v("mdi-share")])],1),i("v-btn",{attrs:{color:"warning"},on:{click:t.downloadpdf}},[t._v("Download"),i("v-icon",{staticClass:"mdi-light",attrs:{small:""}},[t._v("mdi-download")])],1),i("v-btn",{attrs:{color:"error"},on:{click:function(e){t.viewDialog=!1}}},[t._v("back "),i("v-icon",{staticClass:"mdi-light",attrs:{small:""}},[t._v("mdi-arrow-right")])],1)],1)],1)],1)],1)]],2)},a=[],s=(l("4de4"),l("a434"),l("b99a")),n=l("d67e"),o=l("4ad7"),c=l("6468"),r={name:"allBills",data:function(){return{search:"",viewDialog:!1,dialog:!1,userId:null,loading:!1,message:null,singleSelect:!1,headers:[{text:"Bill Name",align:"start",sortable:!1,value:"billName"},{text:"Creation on ",value:"createdAt"},{text:"updated on",value:"updatedAt"},{text:"Actions",value:"actions",sortable:!1}],items:[],selectedToView:[],bill_Name:"",totalPrice:"",initialLength:null,billId:null,editDialog:!1,isValid:!0,blockRemoval:!0,inputGroup:0,billName:null,billItems:null,billItemsNames:[],bill:new o["a"]("","",""),bill_line_items:[],verifyBillName:[function(t){return!!t||"Bill Name is required"},function(t){return t&&t.length>=4||"Bill Name must be greater than 3 characters"}],verifyBillElement:[function(t){return!!t||"Number of elements required"},function(t){return t&&t>0||"Bill must have atleast one element"}],verifyItemName:[function(t){return!!t||"Please make a valid selection"}],verifyQuantity:[function(t){return!!t||"Please add a valid value"}]}},mounted:function(){this.useUserId(),this.fetchBills(),this.fetchBill_item()},created:function(){this.fetchBills(),this.fetchBill_item(),this.useUserId()},computed:{currentUser:function(){return this.$store.state.auth.user},getUserID:function(){return this.$store.state.auth.user.id}},watch:{$route:"fetchData",bill_line_items:function(){this.blockRemoval=this.bill_line_items.length<=1}},methods:{cancel:function(){this.editDialog=!1,this.bill_line_items=[]},useUserId:function(){this.getUserID&&(this.userId=this.$store.state.auth.user.id)},addLine:function(){var t=this.bill_line_items.filter((function(t){return null===t.bill_item_name}));t.length>=1&&this.bill_line_items.length>0?this.message="Please fill the last line before adding a new one !":this.bill_line_items.push({bill_item_name:null,quantity:null})},removeLine:function(t){this.blockRemoval||this.bill_line_items.splice(t,1)},validate:function(){this.$refs.form.validate()},updateBill:function(){var t=this;this.loading=!0,this.$validator.validateAll().then((function(e){if(e){var l={billName:t.bill.billName,userId:t.userId,bill_line_items:t.bill_line_items};console.log(l),s["a"].deleteBill(t.userId,t.billId).then((function(){t.loading=!1,location.reload()})).catch((function(t){return t||"Unable to save bill please check your connection and try again"})),s["a"].createBill(l).then((function(e){return t.loading=!1,e})).catch((function(t){return t||"Unable to save bill please check your connection and try again"})),t.editDialog=!1,location.reload(),location.reload()}else t.loading=!1}))},fetchBills:function(){var t=this;this.message=null,this.loading=!0,s["a"].getAllBills(this.userId).then((function(e){t.loading=!1,t.items=e.data})).catch((function(t){return{message:t||"An error ocurred while fetching the bill components please verify your internet conection and try again letter"}}))},fetchBill_item:function(){var t=this;this.message=null,this.loading=!0,c["a"].getBillItems().then((function(e){t.loading=!1,t.billItems=e.data;for(var l=0;l<e.data.length;l++)t.billItemsNames.push(e.data[l].bill_item_name)})).catch((function(t){return{message:t||"An error ocurred while fetching the bill components please verify your internet conection and try again letter"}}))},editItem:function(t){this.bill.billName=t.billName,this.billId=t.id;for(var e=t.bill_items,l=0;l<e.length;l++)this.bill_line_items.push({quantity:t.bill_items[l].bill_line_item.quantity,bill_item_name:t.bill_items[l].bill_item_name});console.log(this.bill_line_items)},view:function(t){if(this.bill_Name=t.billName,this.selectedToView=t.bill_items,t.bill_items){for(var e=0,l=0;l<t.bill_items.length;++l)e=t.bill_items[l].bill_item_price*t.bill_items[l].bill_line_item.quantity+e;console.log(e),this.totalPrice=e}},downloadpdf:function(){var t={filename:this.bill_Name,image:{type:"jpeg"},html2canvas:{},jsPDF:{orientation:"landscape"},margin:[10,10]},e=document.getElementById("pdfToBeGenerated");n().from(e).set(t).save()},deleteItem:function(t){var e=this;if(!0===confirm("ARE YOU SURE, YOU WANT TO DELETE "+t.billName+"?")){var l=t.id;s["a"].deleteBill(this.userId,l).then((function(t){t&&(e.message=t.message,e.fetchBills(),console.log("bill deleted successfully"))})).catch((function(t){e.message=t,console.log("bill not deleted")}))}}}},d=r,m=(l("e375"),l("2877")),u=l("6544"),v=l.n(u),b=l("c6a6"),h=l("8212"),f=l("8336"),_=l("b0af"),g=l("99d9"),p=l("62ad"),y=l("a523"),w=l("8fea"),C=l("169a"),k=l("ce7e"),x=l("4bd4"),B=l("132d"),N=l("0fd9"),I=l("1f4f"),V=l("2fa4"),D=l("8654"),T=l("71d9"),A=l("2a7f"),q=Object(m["a"])(d,i,a,!1,null,"296b4b23",null);e["default"]=q.exports;v()(q,{VAutocomplete:b["a"],VAvatar:h["a"],VBtn:f["a"],VCard:_["a"],VCardActions:g["a"],VCardText:g["c"],VCardTitle:g["d"],VCol:p["a"],VContainer:y["a"],VDataTable:w["a"],VDialog:C["a"],VDivider:k["a"],VForm:x["a"],VIcon:B["a"],VRow:N["a"],VSimpleTable:I["a"],VSpacer:V["a"],VTextField:D["a"],VToolbar:T["a"],VToolbarTitle:A["b"]})}}]);
//# sourceMappingURL=chunk-7c6fe884.f6038e47.js.map