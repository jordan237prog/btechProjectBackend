(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ee58a642"],{"4c34":function(e,t,l){},"57fa":function(e,t,l){"use strict";var i=l("4c34"),a=l.n(i);a.a},b99a:function(e,t,l){"use strict";var i=l("d4ec"),a=l("bee2"),s=l("bc3a"),n=l.n(s),o=l("fce9"),r=o["a"]+"bills",c=function(){function e(){Object(i["a"])(this,e)}return Object(a["a"])(e,[{key:"createBill",value:function(e){return n.a.post(r,e)}},{key:"getAllBills",value:function(e){return n.a.get(r+"/"+e)}},{key:"deleteBill",value:function(e,t){return n.a.delete(r+"/"+e+"/"+t)}},{key:"updateBill",value:function(e,t,l){n.a.delete(r+"/"+e+"/"+t),n.a.post(r,l)}}]),e}();t["a"]=new c},e6e7:function(e,t,l){"use strict";l.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-row",{attrs:{justify:"center"}},[i("v-col",{staticClass:" col-11 .col-md-4"},[i("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.items,search:e.search,"sort-by":"billName"},scopedSlots:e._u([{key:"top",fn:function(){return[i("v-toolbar",{attrs:{flat:"",color:"white"}},[i("v-toolbar-title",[e._v("LIST OF ALL BILLS")]),i("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),i("v-spacer"),i("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search",outlined:"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),i("v-spacer"),i("router-link",{attrs:{to:"newBill"}},[i("v-btn",{staticClass:"mb-2",attrs:{link:"",color:"primary",dark:""}},[e._v("New Bill ")])],1)],1)]},proxy:!0},{key:"item.actions",fn:function(t){var l=t.item;return[i("v-avatar",{staticClass:"avatar",attrs:{color:"warning",size:"30"},on:{click:function(t){e.view(l),e.viewDialog=!0}}},[i("v-icon",{staticClass:"mdi-light",attrs:{small:""}},[e._v(" mdi-file-pdf-box ")])],1),i("v-avatar",{attrs:{color:"error",size:"30"},on:{click:function(t){return e.deleteItem(l)}}},[i("v-icon",{staticClass:"mdi-light",attrs:{small:""}},[e._v("mdi-delete")])],1)]}},{key:"no-data",fn:function(){},proxy:!0}],null,!0)})],1)],1),i("v-dialog",{attrs:{persistent:"","max-width":"900px"},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}},[i("v-card",[i("v-card-title",[i("span",{staticClass:"headline"},[e._v("Edit Bill")])]),i("v-card-text",[i("v-container",[i("v-form",{model:{value:e.isValid,callback:function(t){e.isValid=t},expression:"isValid"}},[i("v-row",[i("v-col",[i("h3",[e._v("Bill by")]),i("img",{staticClass:"img",attrs:{height:"30",src:l("dae4")}})])],1),i("v-row",[i("v-col",{staticClass:" col- .col-md-4"},[i("v-text-field",{staticClass:"error-combobox",attrs:{outlined:"",type:"text",rules:e.verifyBillName,name:"billName",label:"Bill Name","append-icon":"mdi-card-plus",required:"",small:""},model:{value:e.bill.billName,callback:function(t){e.$set(e.bill,"billName",t)},expression:"bill.billName"}})],1)],1),i("v-card",{staticClass:"errors",attrs:{flat:""}},[i("span",{staticStyle:{color:"#FB236A"}},[e._v(e._s(e.message))])]),i("v-row",{attrs:{id:"line_item",justify:"center"}},[i("v-col",{staticClass:" col-3 .col-md-4"},[i("h3",[e._v(" ITEM NAME ")])]),i("v-col",{staticClass:" col-2 .col-md-4"},[i("h3",[e._v(" QUANTITY ")])]),i("v-col",{staticClass:" col-2 .col-md-4"},[i("h3")])],1),e.message?i("v-row",{staticClass:" col-10 .col-md-4",attrs:{justify:"center"}}):e._e(),e._l(e.bill_line_items,(function(t,l){return i("v-row",{key:l,attrs:{justify:"center"}},[i("v-col",{staticClass:" col-5 .col-md-4"},[i("v-autocomplete",{attrs:{chips:"",items:e.billItemsNames,"item-text":"bill_item_name",outlined:"",rules:e.verifyItemName,color:"white",height:"2",name:"bill_item_name",label:"Item Name",required:""},model:{value:t.bill_item_name,callback:function(l){e.$set(t,"bill_item_name",l)},expression:"bill_line_item.bill_item_name"}})],1),i("v-col",{staticClass:" col-5 .col-md-4"},[i("v-text-field",{directives:[{name:"cloneya-input",rawName:"v-cloneya-input",value:"quantity",expression:"'quantity'"}],staticClass:"error-combobox",attrs:{outlined:"",type:"number",name:"quantity",rules:e.verifyQuantity,label:"Quantity","append-icon":"mdi-numeric-1-box-multiple",required:""},model:{value:t.quantity,callback:function(l){e.$set(t,"quantity",l)},expression:"bill_line_item.quantity"}})],1),i("v-col",{staticClass:" col-1 .col-md-4"},[i("v-avatar",{attrs:{color:"primary","x-large":""},on:{click:e.addLine}},[i("v-icon",{staticClass:"mdi-108px mdi-light"},[e._v("mdi-playlist-plus")])],1)],1),i("v-col",{staticClass:" col-1 .col-md-4"},[l+1===e.bill_line_items.length?i("v-avatar",{attrs:{color:"error","x-large":""},on:{click:function(t){return e.removeLine(l)}}},[i("v-icon",{attrs:{dark:""}},[e._v("mdi-delete-forever")])],1):e._e()],1)],1)})),i("v-row",[i("v-col",{staticClass:"col-6 .col-md-4"}),i("v-col",{staticClass:"col-3 .col-md-4"},[i("v-btn",{staticClass:"log-btn",attrs:{block:"","x-large":"",color:"error",name:"createBill"},on:{click:e.cancel}},[e._v(" cancel ")])],1),i("v-col",{staticClass:"col-3 .col-md-4"},[i("v-btn",{staticClass:"log-btn",attrs:{block:"","x-large":"",loading:e.loading,disabled:!e.isValid,color:"#10195D",dark:"",name:"createBill"},on:{click:e.updateBill}},[e._v(" update bill ")])],1)],1)],2)],1)],1)],1)],1),[i("v-row",[i("v-dialog",{attrs:{width:"800px",persistent:""},model:{value:e.viewDialog,callback:function(t){e.viewDialog=t},expression:"viewDialog"}},[i("v-card",[i("div",{attrs:{id:"pdfToBeGenerated"}},[i("v-card-title",[i("v-row",[e._v("Bill name : "),i("h4",[e._v(e._s(e.bill_Name))])])],1),e._v(" "),i("v-divider"),i("v-card-text",[i("v-row",[i("v-col",{staticClass:" col- .col-md-4"},[e._v(" Bill created by "+e._s(e.user_name)+" ")]),i("v-col",{staticClass:" col-2 .col-md-4"},[i("img",{staticClass:"img",attrs:{height:"30",src:l("dae4")}})])],1),[i("v-simple-table",{attrs:{height:"300px"},scopedSlots:e._u([{key:"default",fn:function(){return[i("thead",[i("tr",[i("th",{staticClass:"text-left"},[e._v("Designation")]),i("th",{staticClass:"text-left"},[e._v("Quantity")]),i("th",{staticClass:"text-left"},[e._v("Unit price(XAF)")]),i("th",{staticClass:"text-left"},[e._v("Total Price(XAF)")])])]),i("tbody",e._l(e.selectedToView,(function(t,l){return i("tr",{key:l},[i("td",[e._v(e._s(t.bill_item_name))]),i("td",[e._v(e._s(t.bill_line_item.quantity))]),i("td",[e._v(e._s(t.bill_item_price))]),i("td",[i("h3",[e._v(e._s(Number(t.bill_item_price)*Number(t.bill_line_item.quantity)))])])])})),0)]},proxy:!0}])})],i("v-divider"),i("v-row",[i("v-col",{staticClass:" col-1 .col-md-4"}),i("v-col",{staticClass:" col- .col-md-4"},[i("h2",[e._v("Total")])]),i("v-col",{staticClass:" col-3 .col-md-4"},[i("h2",[e._v(e._s(e.totalPrice)+"XAF")])])],1),i("v-divider")],2)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"warning"},on:{click:e.downloadpdf}},[e._v("Download"),i("v-icon",{staticClass:"mdi-light",attrs:{small:""}},[e._v("mdi-download")])],1),i("v-btn",{attrs:{color:"error"},on:{click:function(t){e.viewDialog=!1}}},[e._v("back "),i("v-icon",{staticClass:"mdi-light",attrs:{small:""}},[e._v("mdi-arrow-right")])],1)],1)],1)],1)],1)]],2)},a=[],s=(l("4de4"),l("a434"),l("b99a")),n=l("d67e"),o=l("4ad7"),r=l("6468"),c={name:"allBills",data:function(){return{search:"",user_name:"",viewDialog:!1,dialog:!1,userId:null,loading:!1,message:null,singleSelect:!1,headers:[{text:"Bill Name",align:"start",sortable:!1,value:"billName"},{text:"Creation on ",value:"createdAt"},{text:"updated on",value:"updatedAt"},{text:"Actions",value:"actions",sortable:!1}],items:[],selectedToView:[],bill_Name:"",totalPrice:"",initialLength:null,billId:null,editDialog:!1,isValid:!0,blockRemoval:!0,inputGroup:0,billName:null,billItems:null,billItemsNames:[],bill:new o["a"]("","",""),bill_line_items:[],verifyBillName:[function(e){return!!e||"Bill Name is required"},function(e){return e&&e.length>=4||"Bill Name must be greater than 3 characters"}],verifyBillElement:[function(e){return!!e||"Number of elements required"},function(e){return e&&e>0||"Bill must have atleast one element"}],verifyItemName:[function(e){return!!e||"Please make a valid selection"}],verifyQuantity:[function(e){return!!e||"Please add a valid value"}]}},mounted:function(){this.useUserId(),this.fetchBills(),this.fetchBill_item()},created:function(){this.fetchBills(),this.fetchBill_item(),this.useUserId()},computed:{currentUser:function(){return this.$store.state.auth.user},getUserID:function(){return this.$store.state.auth.user.id}},watch:{$route:"fetchData",bill_line_items:function(){this.blockRemoval=this.bill_line_items.length<=1}},methods:{cancel:function(){this.editDialog=!1,this.bill_line_items=[]},useUserId:function(){this.getUserID&&(this.userId=this.$store.state.auth.user.id,this.user_name=this.$store.state.auth.user.username.toUpperCase())},addLine:function(){var e=this.bill_line_items.filter((function(e){return null===e.bill_item_name}));e.length>=1&&this.bill_line_items.length>0?this.message="Please fill the last line before adding a new one !":this.bill_line_items.push({bill_item_name:null,quantity:null})},removeLine:function(e){this.blockRemoval||this.bill_line_items.splice(e,1)},validate:function(){this.$refs.form.validate()},updateBill:function(){var e=this;this.loading=!0,this.$validator.validateAll().then((function(t){if(t){var l={billName:e.bill.billName,userId:e.userId,bill_line_items:e.bill_line_items};console.log(l),s["a"].updateBill(e.userId,e.billId,l),e.editDialog=!1,location.reload(),location.reload()}else e.loading=!1}))},fetchBills:function(){var e=this;this.message=null,this.loading=!0,s["a"].getAllBills(this.userId).then((function(t){e.loading=!1,e.items=t.data})).catch((function(e){return{message:e||"An error ocurred while fetching the bill components please verify your internet conection and try again letter"}}))},fetchBill_item:function(){var e=this;this.message=null,this.loading=!0,r["a"].getBillItems().then((function(t){e.loading=!1,e.billItems=t.data;for(var l=0;l<t.data.length;l++)e.billItemsNames.push(t.data[l].bill_item_name)})).catch((function(e){return{message:e||"An error ocurred while fetching the bill components please verify your internet conection and try again letter"}}))},editItem:function(e){this.bill.billName=e.billName,this.billId=e.id;for(var t=e.bill_items,l=0;l<t.length;l++)this.bill_line_items.push({quantity:e.bill_items[l].bill_line_item.quantity,bill_item_name:e.bill_items[l].bill_item_name});console.log(this.bill_line_items)},view:function(e){if(this.bill_Name=e.billName,this.selectedToView=e.bill_items,e.bill_items){for(var t=0,l=0;l<e.bill_items.length;++l)t=e.bill_items[l].bill_item_price*e.bill_items[l].bill_line_item.quantity+t;console.log(t),this.totalPrice=t}},downloadpdf:function(){var e={filename:this.bill_Name,image:{type:"jpeg"},html2canvas:{},jsPDF:{orientation:"landscape"},margin:[10,10]},t=document.getElementById("pdfToBeGenerated");n().from(t).set(e).save()},deleteItem:function(e){var t=this;if(!0===confirm("ARE YOU SURE, YOU WANT TO DELETE "+e.billName+"?")){var l=e.id;s["a"].deleteBill(this.userId,l).then((function(e){e&&(t.message=e.message,t.fetchBills(),console.log("bill deleted successfully"))})).catch((function(e){t.message=e,console.log("bill not deleted")}))}}}},d=c,m=(l("57fa"),l("2877")),u=l("6544"),v=l.n(u),b=l("c6a6"),h=l("8212"),f=l("8336"),_=l("b0af"),g=l("99d9"),p=l("62ad"),y=l("a523"),w=l("8fea"),C=l("169a"),x=l("ce7e"),k=l("4bd4"),B=l("132d"),N=l("0fd9"),I=l("1f4f"),V=l("2fa4"),D=l("8654"),T=l("71d9"),A=l("2a7f"),q=Object(m["a"])(d,i,a,!1,null,"28413592",null);t["default"]=q.exports;v()(q,{VAutocomplete:b["a"],VAvatar:h["a"],VBtn:f["a"],VCard:_["a"],VCardActions:g["a"],VCardText:g["c"],VCardTitle:g["d"],VCol:p["a"],VContainer:y["a"],VDataTable:w["a"],VDialog:C["a"],VDivider:x["a"],VForm:k["a"],VIcon:B["a"],VRow:N["a"],VSimpleTable:I["a"],VSpacer:V["a"],VTextField:D["a"],VToolbar:T["a"],VToolbarTitle:A["b"]})}}]);
//# sourceMappingURL=chunk-ee58a642.d72c886f.js.map