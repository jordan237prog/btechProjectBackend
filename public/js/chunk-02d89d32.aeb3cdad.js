(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-02d89d32"],{"465d":function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));var i=a("d4ec"),o=function t(e,a,o){Object(i["a"])(this,t),this.quoteName=e,this.userId=a,this.quote_line_items=o}},"6d68":function(t,e,a){"use strict";var i=a("9629"),o=a.n(i);o.a},"7b7c":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-row",{attrs:{justify:"center"}},[i("v-col",{staticClass:" col-11 .col-md-4"},[i("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.items,search:t.search,"sort-by":"quoteName"},scopedSlots:t._u([{key:"top",fn:function(){return[i("v-toolbar",{attrs:{flat:"",color:"white"}},[i("v-toolbar-title",[t._v("LIST OF ALL QUOTAS")]),i("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),i("v-spacer"),i("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search",outlined:"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),i("v-spacer"),i("router-link",{attrs:{to:"newQuota"}},[i("v-btn",{staticClass:"mb-2",attrs:{link:"",color:"primary",dark:""}},[t._v("New Quota ")])],1)],1)]},proxy:!0},{key:"item.actions",fn:function(e){var a=e.item;return[i("v-avatar",{attrs:{color:"primary",size:"30"},on:{click:function(e){t.editItem(a),t.editDialog=!0}}},[i("v-icon",{staticClass:"mdi-light",attrs:{small:""}},[t._v("mdi-pencil")])],1),i("v-avatar",{staticClass:"avatar",attrs:{color:"warning",size:"30"},on:{click:function(e){t.view(a),t.viewDialog=!0}}},[i("v-icon",{staticClass:"mdi-light",attrs:{small:""}},[t._v(" mdi-file-pdf-box ")])],1),i("v-avatar",{attrs:{color:"error",size:"30"},on:{click:function(e){return t.deleteItem(a)}}},[i("v-icon",{staticClass:"mdi-light",attrs:{small:""}},[t._v("mdi-delete")])],1)]}},{key:"no-data",fn:function(){},proxy:!0}],null,!0)})],1)],1),i("v-dialog",{attrs:{persistent:"","max-width":"900px"},model:{value:t.editDialog,callback:function(e){t.editDialog=e},expression:"editDialog"}},[i("v-card",[i("v-card-title",[i("span",{staticClass:"headline"},[t._v("Edit Quote")])]),i("v-card-text",[i("v-container",[i("v-form",{model:{value:t.isValid,callback:function(e){t.isValid=e},expression:"isValid"}},[i("v-row",[i("v-col",[i("h3",[t._v("Quota by")]),i("img",{staticClass:"img",attrs:{height:"30",src:a("dae4")}})])],1),i("v-row",[i("v-col",{staticClass:" col- .col-md-4"},[i("v-text-field",{staticClass:"error-combobox",attrs:{outlined:"",type:"text",rules:t.verifyQuoteName,name:"quoteName",label:"Quote Name","append-icon":"mdi-card-plus",required:"",small:""},model:{value:t.quote.quoteName,callback:function(e){t.$set(t.quote,"quoteName",e)},expression:"quote.quoteName"}})],1)],1),i("v-card",{staticClass:"errors",attrs:{flat:""}},[i("span",{staticStyle:{color:"#FB236A"}},[t._v(t._s(t.message))])]),i("v-row",{attrs:{id:"line_item",justify:"center"}},[i("v-col",{staticClass:" col-3 .col-md-4"},[i("h3",[t._v(" ITEM NAME ")])]),i("v-col",{staticClass:" col-2 .col-md-4"},[i("h3",[t._v(" QUANTITY ")])]),i("v-col",{staticClass:" col-2 .col-md-4"},[i("h3")])],1),t.message?i("v-row",{staticClass:" col-10 .col-md-4",attrs:{justify:"center"}}):t._e(),t._l(t.quote_line_items,(function(e,a){return i("v-row",{key:a,attrs:{justify:"center"}},[i("v-col",{staticClass:" col-5 .col-md-4"},[i("v-autocomplete",{attrs:{chips:"",items:t.quoteItemsNames,"item-text":"quote_item_name",outlined:"",rules:t.verifyItemName,color:"white",height:"2",name:"quote_item_name",label:"Item Name",required:""},model:{value:e.quote_item_name,callback:function(a){t.$set(e,"quote_item_name",a)},expression:"quote_line_item.quote_item_name"}})],1),i("v-col",{staticClass:" col-5 .col-md-4"},[i("v-text-field",{directives:[{name:"cloneya-input",rawName:"v-cloneya-input",value:"quantity",expression:"'quantity'"}],staticClass:"error-combobox",attrs:{outlined:"",type:"number",name:"quantity",rules:t.verifyQuantity,label:"Quantity","append-icon":"mdi-numeric-1-box-multiple",required:""},model:{value:e.quantity,callback:function(a){t.$set(e,"quantity",a)},expression:"quote_line_item.quantity"}})],1),i("v-col",{staticClass:" col-1 .col-md-4"},[i("v-avatar",{attrs:{color:"primary","x-large":""},on:{click:t.addLine}},[i("v-icon",{staticClass:"mdi-108px mdi-light"},[t._v("mdi-playlist-plus")])],1)],1),i("v-col",{staticClass:" col-1 .col-md-4"},[a+1===t.quote_line_items.length?i("v-avatar",{attrs:{color:"error","x-large":""},on:{click:function(e){return t.removeLine(a)}}},[i("v-icon",{attrs:{dark:""}},[t._v("mdi-delete-forever")])],1):t._e()],1)],1)})),i("v-row",[i("v-col",{staticClass:"col-6 .col-md-4"}),i("v-col",{staticClass:"col-3 .col-md-4"},[i("v-btn",{staticClass:"log-btn",attrs:{block:"","x-large":"",color:"error",name:"createQuote"},on:{click:t.cancel}},[t._v(" cancel ")])],1),i("v-col",{staticClass:"col-3 .col-md-4"},[i("v-btn",{staticClass:"log-btn",attrs:{block:"","x-large":"",loading:t.loading,disabled:!t.isValid,color:"#10195D",dark:"",name:"createQuote"},on:{click:t.updateQuote}},[t._v(" update quote ")])],1)],1)],2)],1)],1)],1)],1),[i("v-row",[i("v-dialog",{attrs:{width:"800px",persistent:""},model:{value:t.viewDialog,callback:function(e){t.viewDialog=e},expression:"viewDialog"}},[i("v-card",[i("div",{attrs:{id:"pdfToBeGenerated"}},[i("v-card-title",[i("v-row",[t._v("Quota name : "),i("h3",[t._v(t._s(t.quote_Name))])])],1),t._v(" "),i("v-divider"),i("v-card-text",[i("v-row",[i("v-col",{staticClass:" col- .col-md-4"}),i("v-col",{staticClass:" col-2 .col-md-4"},[i("img",{staticClass:"img",attrs:{height:"30",src:a("dae4")}})])],1),[i("v-simple-table",{attrs:{height:"300px"},scopedSlots:t._u([{key:"default",fn:function(){return[i("thead",[i("tr",[i("th",{staticClass:"text-left"},[t._v("Designation")]),i("th",{staticClass:"text-left"},[t._v("Quantity")]),i("th",{staticClass:"text-left"},[t._v("Unit price(XAF)")]),i("th",{staticClass:"text-left"},[t._v("Total Price(XAF)")])])]),i("tbody",t._l(t.selectedToView,(function(e,a){return i("tr",{key:a},[i("td",[t._v(t._s(e.quote_item_name))]),i("td",[t._v(t._s(e.quote_line_item.quantity))]),i("td",[t._v(t._s(e.quote_item_price))]),i("td",[i("h3",[t._v(t._s(Number(e.quote_item_price)*Number(e.quote_line_item.quantity)))])])])})),0)]},proxy:!0}])})],i("v-divider"),i("v-row",[i("v-col",{staticClass:" col-1 .col-md-4"}),i("v-col",{staticClass:" col- .col-md-4"},[i("h2",[t._v("Total")])]),i("v-col",{staticClass:" col-3 .col-md-4"},[i("h2",[t._v(t._s(t.totalPrice))])])],1),i("v-divider")],2)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"primary"},on:{click:function(e){t.viewDialog=!1}}},[t._v("share"),i("v-icon",{staticClass:"mdi-light",attrs:{small:""}},[t._v("mdi-share")])],1),i("v-btn",{attrs:{color:"warning"},on:{click:t.downloadpdf}},[t._v("Download"),i("v-icon",{staticClass:"mdi-light",attrs:{small:""}},[t._v("mdi-download")])],1),i("v-btn",{attrs:{color:"error"},on:{click:function(e){t.viewDialog=!1}}},[t._v("back "),i("v-icon",{staticClass:"mdi-light",attrs:{small:""}},[t._v("mdi-arrow-right")])],1)],1)],1)],1)],1)]],2)},o=[],s=(a("4de4"),a("a434"),a("ff70")),l=a("d67e"),n=a("465d"),c=a("93f0"),r={name:"allQuota",data:function(){return{search:"",viewDialog:!1,dialog:!1,userId:null,loading:!1,message:null,singleSelect:!1,headers:[{text:"Quote Name",align:"start",sortable:!1,value:"quoteName"},{text:"Creation on ",value:"createdAt"},{text:"updated on",value:"updatedAt"},{text:"Actions",value:"actions",sortable:!1}],items:[],selectedToView:[],quote_Name:"",totalPrice:"",initialLength:null,quoteId:null,editDialog:!1,isValid:!0,blockRemoval:!0,inputGroup:0,quoteName:null,quoteItems:null,quoteItemsNames:[],quote:new n["a"]("","",""),quote_line_items:[],verifyQuoteName:[function(t){return!!t||"Quote Name is required"},function(t){return t&&t.length>=4||"Quote Name must be greater than 3 characters"}],verifyQuoteElement:[function(t){return!!t||"Number of elements required"},function(t){return t&&t>0||"quote must have atleast one element"}],verifyItemName:[function(t){return!!t||"Please make a valid selection"}],verifyQuantity:[function(t){return!!t||"Please add a valid value"}]}},mounted:function(){this.useUserId(),this.fetchQuotes(),this.fetchQuote_item()},created:function(){this.fetchQuotes(),this.fetchQuote_item(),this.useUserId()},computed:{currentUser:function(){return this.$store.state.auth.user},getUserID:function(){return this.$store.state.auth.user.id}},watch:{$route:"fetchData",quote_line_items:function(){this.blockRemoval=this.quote_line_items.length<=1}},methods:{cancel:function(){this.editDialog=!1,this.quote_line_items=[]},useUserId:function(){this.getUserID&&(this.userId=this.$store.state.auth.user.id)},addLine:function(){var t=this.quote_line_items.filter((function(t){return null===t.quote_item_name}));t.length>=1&&this.quote_line_items.length>0?this.message="Please fill the last line before adding a new one !":this.quote_line_items.push({quote_item_name:null,quantity:null})},removeLine:function(t){this.blockRemoval||this.quote_line_items.splice(t,1)},validate:function(){this.$refs.form.validate()},updateQuote:function(){var t=this;this.loading=!0,this.$validator.validateAll().then((function(e){if(e){var a={quoteName:t.quote.quoteName,userId:t.userId,quote_line_items:t.quote_line_items};console.log(a),s["a"].updateQuote(t.userId,t.quoteId,a),t.editDialog=!1,location.reload(),location.reload()}else t.loading=!1}))},fetchQuotes:function(){var t=this;this.message=null,this.loading=!0,s["a"].getAllQuotes(this.userId).then((function(e){t.loading=!1,t.items=e.data})).catch((function(t){return{message:t||"An error ocurred while fetching the quote components please verify your internet conection and try again letter"}}))},fetchQuote_item:function(){var t=this;this.message=null,this.loading=!0,c["a"].getQuoteItems().then((function(e){t.loading=!1,t.quoteItems=e.data;for(var a=0;a<e.data.length;a++)t.quoteItemsNames.push(e.data[a].quote_item_name)})).catch((function(t){return{message:t||"An error ocurred while fetching the quote components please verify your internet conection and try again letter"}}))},editItem:function(t){this.quote.quoteName=t.quoteName,this.quoteId=t.id;for(var e=t.quote_items,a=0;a<e.length;a++)this.quote_line_items.push({quantity:t.quote_items[a].quote_line_item.quantity,quote_item_name:t.quote_items[a].quote_item_name});console.log(this.quote_line_items)},view:function(t){if(this.quote_Name=t.quoteName,this.selectedToView=t.quote_items,t.quote_items){for(var e=0,a=0;a<t.quote_items.length;++a)e=t.quote_items[a].quote_item_price*t.quote_items[a].quote_line_item.quantity+e;console.log(e),this.totalPrice=e}},downloadpdf:function(){var t={filename:this.quote_Name,image:{type:"jpeg"},html2canvas:{},jsPDF:{orientation:"landscape"},margin:[10,10]},e=document.getElementById("pdfToBeGenerated");l().from(e).set(t).save()},deleteItem:function(t){var e=this;if(!0===confirm("ARE YOU SURE, YOU WANT TO DELETE "+t.quoteName+"?")){var a=t.id;s["a"].deleteQuote(this.userId,a).then((function(t){t&&(e.message=t.message,e.fetchQuotes(),console.log("quote deleted successfully"))})).catch((function(t){e.message=t,console.log("quote not deleted")}))}}}},u=r,d=(a("6d68"),a("2877")),m=a("6544"),v=a.n(m),f=a("c6a6"),h=a("8212"),_=a("8336"),q=a("b0af"),g=a("99d9"),p=a("62ad"),b=a("a523"),y=a("8fea"),w=a("169a"),C=a("ce7e"),k=a("4bd4"),x=a("132d"),Q=a("0fd9"),N=a("1f4f"),I=a("2fa4"),V=a("8654"),D=a("71d9"),T=a("2a7f"),A=Object(d["a"])(u,i,o,!1,null,"3f68790c",null);e["default"]=A.exports;v()(A,{VAutocomplete:f["a"],VAvatar:h["a"],VBtn:_["a"],VCard:q["a"],VCardActions:g["a"],VCardText:g["c"],VCardTitle:g["d"],VCol:p["a"],VContainer:b["a"],VDataTable:y["a"],VDialog:w["a"],VDivider:C["a"],VForm:k["a"],VIcon:x["a"],VRow:Q["a"],VSimpleTable:N["a"],VSpacer:I["a"],VTextField:V["a"],VToolbar:D["a"],VToolbarTitle:T["b"]})},"93f0":function(t,e,a){"use strict";var i=a("d4ec"),o=a("bee2"),s=a("bc3a"),l=a.n(s),n=a("fce9"),c=n["a"]+"quote_items/",r=function(){function t(){Object(i["a"])(this,t)}return Object(o["a"])(t,[{key:"getQuoteItems",value:function(){return l.a.get(c)}}]),t}();e["a"]=new r},9629:function(t,e,a){},ff70:function(t,e,a){"use strict";var i=a("d4ec"),o=a("bee2"),s=a("bc3a"),l=a.n(s),n=a("fce9"),c=n["a"]+"quotes",r=function(){function t(){Object(i["a"])(this,t)}return Object(o["a"])(t,[{key:"createQuote",value:function(t){return l.a.post(c,t)}},{key:"getAllQuotes",value:function(t){return l.a.get(c+"/"+t)}},{key:"deleteQuote",value:function(t,e){return l.a.delete(c+"/"+t+"/"+e)}},{key:"updateQuote",value:function(t,e,a){l.a.delete(c+"/"+t+"/"+e),l.a.post(c,a)}}]),t}();e["a"]=new r}}]);
//# sourceMappingURL=chunk-02d89d32.aeb3cdad.js.map